<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.84.1" /><META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon" href="/karpenter/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/karpenter/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/karpenter/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/karpenter/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/karpenter/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/karpenter/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/karpenter/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/karpenter/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/karpenter/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/karpenter/favicons/android-192x192.png" sizes="192x192">

<title>Amazon Web Services (AWS) | Karpenter</title>
<meta name="description" content="Just-in-time Nodes for Any Kubernetes Cluster"><meta property="og:title" content="Amazon Web Services (AWS)" />
<meta property="og:description" content="Well Known Labels on AWS topology.kubernetes.io/region Example:
topology.kubernetes.io/region=us-east-1
See topology.kubernetes.io/zone.
topology.kubernetes.io/zone Example:
topology.kubernetes.io/zone=us-east-1c
Used on: Node, PersistentVolume
On Node: The kubelet or the external cloud-controller-manager populates this with the information as provided by the cloudprovider. This will be set only if you are using a cloudprovider. However, you should consider setting this on nodes if it makes sense in your topology.
On PersistentVolume: topology-aware volume provisioners will automatically set node affinity constraints on PersistentVolumes." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/karpenter/docs/cloud-providers/aws/" /><meta property="article:section" content="docs" />

<meta property="og:site_name" content="Karpenter" />

<meta itemprop="name" content="Amazon Web Services (AWS)">
<meta itemprop="description" content="Well Known Labels on AWS topology.kubernetes.io/region Example:
topology.kubernetes.io/region=us-east-1
See topology.kubernetes.io/zone.
topology.kubernetes.io/zone Example:
topology.kubernetes.io/zone=us-east-1c
Used on: Node, PersistentVolume
On Node: The kubelet or the external cloud-controller-manager populates this with the information as provided by the cloudprovider. This will be set only if you are using a cloudprovider. However, you should consider setting this on nodes if it makes sense in your topology.
On PersistentVolume: topology-aware volume provisioners will automatically set node affinity constraints on PersistentVolumes.">

<meta itemprop="wordCount" content="537">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Amazon Web Services (AWS)"/>
<meta name="twitter:description" content="Well Known Labels on AWS topology.kubernetes.io/region Example:
topology.kubernetes.io/region=us-east-1
See topology.kubernetes.io/zone.
topology.kubernetes.io/zone Example:
topology.kubernetes.io/zone=us-east-1c
Used on: Node, PersistentVolume
On Node: The kubelet or the external cloud-controller-manager populates this with the information as provided by the cloudprovider. This will be set only if you are using a cloudprovider. However, you should consider setting this on nodes if it makes sense in your topology.
On PersistentVolume: topology-aware volume provisioners will automatically set node affinity constraints on PersistentVolumes."/>




<link rel="preload" href="/karpenter/scss/main.min.c7864c5e11ce29b0d7fb95d2fbbc92f0cd7d92caacfebfa74a46b09df7d22072.css" as="style">
<link href="/karpenter/scss/main.min.c7864c5e11ce29b0d7fb95d2fbbc92f0cd7d92caacfebfa74a46b09df7d22072.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>





  </head>
  <body class="td-page">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/karpenter/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Karpenter</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/karpenter/docs/getting-started/" ><span>Getting Started Guide</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/karpenter/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="https://github.com/awslabs/karpenter" target="_blank" ><i class='fab fa-github'></i><span>GitHub</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




  


<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    

    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav" id="td-section-nav">
    
    
    
    
    
    <ul class="td-sidebar-nav__section pr-md-3 ul-0">
      
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-karpenterdocs-li">
    
      <a href="/karpenter/docs/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id="m-karpenterdocs"><span class="">Documentation</span></a>
    
    
      
      <ul class="ul-1">
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-karpenterdocsgetting-started-li">
    
      <a href="/karpenter/docs/getting-started/" title="Getting Started with Karpenter on AWS" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-karpenterdocsgetting-started"><span class="">Getting Started Guide</span></a>
    
    
  </li>

          
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-karpenterdocsconcepts-li">
    
      <a href="/karpenter/docs/concepts/" title="Intro to Karpenter Concepts" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-karpenterdocsconcepts"><span class="">Concepts</span></a>
    
    
  </li>

          
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-karpenterdocsfaq-li">
    
      <a href="/karpenter/docs/faq/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-karpenterdocsfaq"><span class="">FAQs</span></a>
    
    
  </li>

          
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-karpenterdocsprov-crd-li">
    
      <a href="/karpenter/docs/prov-crd/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-karpenterdocsprov-crd"><span class="">Provisioner CRD</span></a>
    
    
  </li>

          
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-karpenterdocsdeployment-guide-li">
    
      <a href="/karpenter/docs/deployment-guide/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-karpenterdocsdeployment-guide"><span class="">Deployment Guide</span></a>
    
    
  </li>

          
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-karpenterdocsexamples-li">
    
      <a href="/karpenter/docs/examples/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-karpenterdocsexamples"><span class="">Examples</span></a>
    
    
  </li>

          
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id="m-karpenterdocscloud-providers-li">
    
      <a href="/karpenter/docs/cloud-providers/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-karpenterdocscloud-providers"><span class="">Cloud Providers</span></a>
    
    
      
      <ul class="ul-2 foldable">
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id="m-karpenterdocscloud-providersaws-li">
    
      <a href="/karpenter/docs/cloud-providers/aws/" title="Amazon Web Services (AWS)" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id="m-karpenterdocscloud-providersaws"><span class="td-sidebar-nav-active-item">AWS</span></a>
    
    
  </li>

          
        
      </ul>
    
  </li>

          
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-karpenterdocsreference-li">
    
      <a href="/karpenter/docs/reference/" class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id="m-karpenterdocsreference"><span class="">API Reference</span></a>
    
    
  </li>

          
        
          
            
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id="m-karpenterdocsdev-guide-li">
    
      <a href="/karpenter/docs/dev-guide/" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id="m-karpenterdocsdev-guide"><span class="">Development Guide</span></a>
    
    
  </li>

          
        
      </ul>
    
  </li>

    </ul>
  </nav>
</div>




          </aside>
          <aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none">
            
  
  
  
  
  
  
  <div class="td-page-meta ml-2 pb-1 pt-2 mb-0">
  
    
    
      
    
    
    
    
    
    
    

    <a href="https://github.com/awslabs/karpenter/edit/master/website/content/en/docs/Cloud%20Providers/AWS.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
    <a href="https://github.com/awslabs/karpenter/new/master/website/content/en/docs/Cloud%20Providers/AWS.md?filename=change-me.md&amp;value=---%0Atitle%3A&#43;%22Long&#43;Page&#43;Title%22%0AlinkTitle%3A&#43;%22Short&#43;Nav&#43;Title%22%0Aweight%3A&#43;100%0Adescription%3A&#43;%3E-%0A&#43;&#43;&#43;&#43;&#43;Page&#43;description&#43;for&#43;heading&#43;and&#43;indexes.%0A---%0A%0A%23%23&#43;Heading%0A%0AEdit&#43;this&#43;template&#43;to&#43;create&#43;your&#43;new&#43;page.%0A%0A%2A&#43;Give&#43;it&#43;a&#43;good&#43;name%2C&#43;ending&#43;in&#43;%60.md%60&#43;-&#43;e.g.&#43;%60getting-started.md%60%0A%2A&#43;Edit&#43;the&#43;%22front&#43;matter%22&#43;section&#43;at&#43;the&#43;top&#43;of&#43;the&#43;page&#43;%28weight&#43;controls&#43;how&#43;its&#43;ordered&#43;amongst&#43;other&#43;pages&#43;in&#43;the&#43;same&#43;directory%3B&#43;lowest&#43;number&#43;first%29.%0A%2A&#43;Add&#43;a&#43;good&#43;commit&#43;message&#43;at&#43;the&#43;bottom&#43;of&#43;the&#43;page&#43;%28%3C80&#43;characters%3B&#43;use&#43;the&#43;extended&#43;description&#43;field&#43;for&#43;more&#43;detail%29.%0A%2A&#43;Create&#43;a&#43;new&#43;branch&#43;so&#43;you&#43;can&#43;preview&#43;your&#43;new&#43;file&#43;and&#43;request&#43;a&#43;review&#43;via&#43;Pull&#43;Request.%0A" target="_blank"><i class="fa fa-edit fa-fw"></i> Create child page</a>
    <a href="https://github.com/awslabs/karpenter/issues/new?title=Amazon%20Web%20Services%20%28AWS%29" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>
    

  
  
  </div>


            


<div class="td-toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#well-known-labels-on-aws">Well Known Labels on AWS</a>
      <ul>
        <li><a href="#topologykubernetesioregion">topology.kubernetes.io/region</a></li>
        <li><a href="#topologykubernetesiozone">topology.kubernetes.io/zone</a></li>
      </ul>
    </li>
    <li><a href="#how-we-work-with-ec2">How we work with EC2</a></li>
  </ul>
</nav></div>



            

	
		



  
  

	
		



  
  

	

          </aside>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="/karpenter/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="/karpenter/docs/cloud-providers/">Cloud Providers</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="/karpenter/docs/cloud-providers/aws/">AWS</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Amazon Web Services (AWS)</h1>
	
	<header class="article-meta">
		
		
			
				


			
				


			
		
		
	</header>    
	<h2 id="well-known-labels-on-aws">Well Known Labels on AWS</h2>
<h3 id="topologykubernetesioregion">topology.kubernetes.io/region</h3>
<p>Example:</p>
<p><code>topology.kubernetes.io/region=us-east-1</code></p>
<p>See <a href="#topologykubernetesiozone">topology.kubernetes.io/zone</a>.</p>
<h3 id="topologykubernetesiozone">topology.kubernetes.io/zone</h3>
<p>Example:</p>
<p><code>topology.kubernetes.io/zone=us-east-1c</code></p>
<p>Used on: Node, PersistentVolume</p>
<p>On Node: The <code>kubelet</code> or the external <code>cloud-controller-manager</code> populates this with the information as provided by the <code>cloudprovider</code>.  This will be set only if you are using a <code>cloudprovider</code>. However, you should consider setting this on nodes if it makes sense in your topology.</p>
<p>On PersistentVolume: topology-aware volume provisioners will automatically set node affinity constraints on <code>PersistentVolumes</code>.</p>
<p>A zone represents a logical failure domain.  It is common for Kubernetes clusters to span multiple zones for increased availability.  While the exact definition of a zone is left to infrastructure implementations, common properties of a zone include very low network latency within a zone, no-cost network traffic within a zone, and failure independence from other zones.  For example, nodes within a zone might share a network switch, but nodes in different zones should not.</p>
<p>A region represents a larger domain, made up of one or more zones.  It is uncommon for Kubernetes clusters to span multiple regions,  While the exact definition of a zone or region is left to infrastructure implementations, common properties of a region include higher network latency between them than within them, non-zero cost for network traffic between them, and failure independence from other zones or regions.  For example, nodes within a region might share power infrastructure (e.g. a UPS or generator), but nodes in different regions typically would not.</p>
<p>Kubernetes makes a few assumptions about the structure of zones and regions:</p>
<ol>
<li>regions and zones are hierarchical: zones are strict subsets of regions and no zone can be in 2 regions</li>
<li>zone names are unique across regions; for example region &ldquo;africa-east-1&rdquo; might be comprised of zones &ldquo;africa-east-1a&rdquo; and &ldquo;africa-east-1b&rdquo;</li>
</ol>
<p>It should be safe to assume that topology labels do not change.  Even though labels are strictly mutable, consumers of them can assume that a given node is not going to be moved between zones without being destroyed and recreated.</p>
<p>Kubernetes can use this information in various ways.  For example, the scheduler automatically tries to spread the Pods in a ReplicaSet across nodes in a single-zone cluster (to reduce the impact of node failures, see <a href="#kubernetesiohostname">kubernetes.io/hostname</a>). With multiple-zone clusters, this spreading behavior also applies to zones (to reduce the impact of zone failures). This is achieved via <em>SelectorSpreadPriority</em>.</p>
<p><em>SelectorSpreadPriority</em> is a best effort placement. If the zones in your cluster are heterogeneous (for example: different numbers of nodes, different types of nodes, or different pod resource requirements), this placement might prevent equal spreading of your Pods across zones. If desired, you can use homogenous zones (same number and types of nodes) to reduce the probability of unequal spreading.</p>
<p>The scheduler (through the <em>VolumeZonePredicate</em> predicate) also will ensure that Pods, that claim a given volume, are only placed into the same zone as that volume. Volumes cannot be attached across zones.</p>
<p>If <code>PersistentVolumeLabel</code> does not support automatic labeling of your PersistentVolumes, you should consider
adding the labels manually (or adding support for <code>PersistentVolumeLabel</code>). With <code>PersistentVolumeLabel</code>, the scheduler prevents Pods from mounting volumes in a different zone. If your infrastructure doesn&rsquo;t have this constraint, you don&rsquo;t need to add the zone labels to the volumes at all.</p>
<h2 id="how-we-work-with-ec2">How we work with EC2</h2>

	
	
	<div class="text-muted mt-5 pt-3 border-top">

</div>

</div>


          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/awslabs/karpenter" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://slack.k8s.io/" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2021 Amazon.com, Inc. or its affiliates. All Rights Reserved</small>
        
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js" integrity="sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF" crossorigin="anonymous"></script>






 











<script src="/karpenter/js/main.min.a7a64b1552feb424183f0f1a71b37f93dfb6110c447a4cdae2cc90cfc6bbfb2d.js" integrity="sha256-p6ZLFVL&#43;tCQYPw8acbN/k9&#43;2EQxEekza4syQz8a7&#43;y0=" crossorigin="anonymous"></script>




  </body>
</html>